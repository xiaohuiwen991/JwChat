
<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<meta charset="UTF-8">
<head>
    <title>用户详细资料</title>
    <link rel="icon" href="javascript:void(0)/favicon.ico" type="image/icon"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="format-detection" content="telephone=no"/>
    <link rel="stylesheet" href="../css/common.css"/>

    <link type="text/css" rel="stylesheet" href="../css/wap/web_frame.css??ver1" />
    <link type="text/css" rel="stylesheet" href="../css/wap/change_module.css?ver1" />

    <script src="../js/require.2.1.9-jquery.2.0.3-underscore.1.5.2-backbone.1.0.0.js"></script>
    <style type="text/css">
        .geetest {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
        }

        .gt_bg {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: gray;
            opacity: 0.7;
        }

        .geetest .gt_wrap {
            width: 300px;
            margin: 10px auto;
            text-align: center;
            background-color: #fff;
            z-index: 2;
            position: relative;
        }

        .geetest .gt_wrap .gt_top {
            padding: 0 8px;
            height: 44px;
            z-index: 1;
            position: relative;
            text-align: center;
            font-weight: 500;
        }

        .geetest .gt_wrap .title {
            line-height: 45px;
            width: 200px;
            margin: 0 auto;
        }

        .goback {
            position: absolute;
            left: .5rem;
            color: #fff;
            font-size: 1rem;
        }

        input.check::-webkit-input-placeholder {
            /* placeholder颜色  */
            color: red;
        }

        ol, ul, dl, menu li {
            list-style: none;
        }

        p.error {
            margin-left: 30px;
            color: red;
        }
    </style>
</head>
<body>
<div class="m_wrap">
    <div class="m_header">
        <a href="javascript:void(0);" class="goback">返回</a>
        用户详细资料
        <a class="m_header_refresh J_refresh" href="javascript:void(0);"></a>
    </div>
    <br/>
    <br/>
    <form id="login-form" name="pop-form-login" >

        <input type="hidden" name="appkey" value="">

        <div class="mr_b25 m_input_wrap width90">
            <input class="m_input m_name" type="text" id="name_input" autocomplete="on" placeholder="请输入您的姓名" name="trueName">
            <a href="javascript:void(0);" class="J_input_reset m_reset_btn" param="name_input"></a>
        </div>
        <div class="mr_b25 m_input_wrap width90">
            <input class="m_input m_name" type="text" id="company_input" autocomplete="on" placeholder="请输入您的公司名称" name="companyName">
            <a href="javascript:void(0);" class="J_input_reset m_reset_btn" param="company_input"></a>
        </div>
        <div class="mr_b25 m_input_wrap width90">
            <input class="m_name m_input" id="credit_input" type="text" placeholder="请输入您的企业信用识别代码" name="companyCode">
            <a href="javascript:void(0);" class="J_input_reset m_reset_btn" param="credit_input"></a>
            <p class="error hide" id="creditMessage"><font>请输入正确的企业信用识别代码!</font></p>
        </div>
        <div class="mr_b25 m_input_wrap width90">
            <input class="m_phone m_input" id="contact_input" type="text" placeholder="请输入您的联系方式" name="telphone">
            <a href="javascript:void(0);" class="J_input_reset m_reset_btn" param="contact_input"></a>
        </div>
        <div class="mr_b25 m_input_wrap width90">
            <input class="m_name m_input" id="report_input" type="text" placeholder="请输入您的寄送报告地址" name="reportAdress">
            <a href="javascript:void(0);" class="J_input_reset m_reset_btn" param="report_input"></a>
        </div>
        <div class="mr_b25 m_input_wrap width90">
            <input class="m_name m_input" id="invoice_input" type="text" placeholder="请输入您的寄送发票地址" name="invoiceAdress">
            <a href="javascript:void(0);" class="J_input_reset m_reset_btn" param="invoice_input"></a>
        </div>
        <div class="mr_b25 m_input_wrap width90">
            <input class="m_name m_input" id="email_input" type="text" placeholder="请输入您的邮箱地址" name="email">
            <a href="javascript:void(0);" class="J_input_reset m_reset_btn" param="email_input"></a>
        </div>
        <div class="geetest">
            <div class="gt_bg"></div>
            <div class="gt_wrap">
                <div class="gt_top">
                    <a class="gt_exit" id="gt_close" href="javascript:void(0);"></a>

                    <div class="title">请拖动按钮通过验证</div>
                </div>
                <script type="text/javascript" src="http://api.geetest.com/get.php?gt=f43ff6668a26e10f745d87e1a7b5e731&width=300" async></script>
            </div>
        </div>
        <div class="mr_b15">
            <input class="m_button m_submit" readonly="readonly" value="提交">
        </div>
        <div class="mr_b15">
            <a class="m_button m_button_plain" href="javascript:void(0)">跳过个人信息设置</a>
        </div>
    </form>
    <div class="external">
        <div class="ex-wrap ex-href">
        </div>
    </div>
</div>

<div class="toolMenuBg" id="tool_menu_bg" ></div>
<div class="toolMenu" id="tool_menu" >
    <menu class="toolBut q">
        <li id="toolHome" sorts="9" style=" width:33%;">
            <a id="index_link1" href="../wap_jypx6.html"  >
                <b class="icon" id="icon_960813">
                    <img src="../images/wap/toolHome_icon.png" />
                </b>
                <strong>首页</strong>
            </a>
        </li>
        <li id="toolTel" sorts="8" style=" width:33%;">
            <a  href="contact.html"  >
                <b class="icon" id="icon_960810">
                    <img src="../images/wap/toolTel_icon.png" />
                </b>
                <strong>电话</strong>
            </a>
        </li>
        <li id="toolMember" sorts="1" style=" width:33%;">
            <a  href="mydata.html"  >
                <b class="icon" id="icon_960814">
                    <img src="../images/wap/toolMember_icon.png" />
                </b>
                <strong>会员</strong>
            </a>
        </li>
    </menu>
</div>

<script type="text/javascript">
    var device = (function () {
        var a;
        return function () {
            if (a) {
                return a;
            }
            a = {};
            var b = {isIPAD: "ipad", isIPHONE: "iphone", isIPOD: "ipod", isAndroid: "android"}, c;
            var ua = navigator.userAgent.toLowerCase();
            for (c in b) {
                a[c] = -1 !== ua.indexOf(b[c]) ? true : false;
            }
            a.isIOS = a.isIPAD || a.isIPHONE || a.isIPOD;
            return a;
        }
    })();

    //建立ios与native通信桥梁
    var ios_webview_bridge;
    document.addEventListener('WebViewJavascriptBridgeReady', function onBridgeReady(event) {
        ios_webview_bridge = event.bridge;
        ios_webview_bridge.init(function (message, responseCallback) {
            responseCallback(message);
        });
    }, false);
    function iosSendMessage(data, callback) {
        try {
            if (!ios_webview_bridge) {
                setTimeout(function () {
                    iosSendMessage(data, callback);
                }, 40);
                return false;
            }
            ios_webview_bridge.send(data, function responseCallback(responseData) {
                callback && callback(responseData);
            });
        } catch (e) {}
    }

    var appKey = '';
    var isStageAPP = false;

    if (appKey == '10211') {
        isStageAPP = true;
    }

    var isTrue = false;
    var referrer = '';
    $('.m_reset_btn').click(function(){
        var id = this.getAttribute('param');
        document.getElementById(id).value = '';
    }),$('.goback').click(function(){
        window.location.href = "register.htm";
    }),$('.m_submit').click(function(){
        var name = $('#name_input').val().trim();
        var company = $('#company_input').val().trim();
        var credit = $('#credit_input').val().trim();
        var contact = $('#contact_input').val().trim();
        var report = $('#report_input').val().trim();
        var invoice = $('#invoice_input').val().trim();
        var email = $('#email_input').val().trim();
        isTrue = false;
        if(name==''||name==null){
            check('name_input');
        }
        if(company==''||company==null){
            check('company_input');
        }
        if(credit==''||credit==null){
            check('credit_input');
        }
        if(contact==''||contact==null){
            check('contact_input');
        }
        if(report==''||report==null){
            check('report_input');
        }
        if(invoice==''||invoice==null){
            check('invoice_input');
        }
        if(email==''||email==null){
            check('email_input');
        }
        if(isTrue) return;

        var data = $('#login-form').serialize();
        var data2 = window.localStorage.getItem("register");
        $.ajax({
            type: "post",
            dataType: "json",
//            url: "http://localhost:8080/code/wx/business/WeChart/register",
            url: "http://www.masterjoker.cn:8080/code/wx/business/WeChart/register",
            data:data+'&'+data2,
            success: function (msg) {
                if(msg.flag == 1) {
                    window.location.href = "success.htm";
                } else {
                    window.location.href = "error.htm";
                }
            }
        });

    }),$('.m_button_plain').click(function(){
        var data2 = window.localStorage.getItem("register");
        $.ajax({
            type: "post",
            dataType: "json",
//            url: "http://localhost:8080/code/wx/business/WeChart/register",
            url: "http://www.masterjoker.cn:8080/code/wx/business/WeChart/register",
            data:data2,
            success: function (msg) {
                if(msg.flag == 1) {
                    window.location.href = "success.htm";
                } else {
                    window.location.href = "error.htm";
                }
            }
        });
    });

    function checkCompanyCode(){
        var reg = /^[0-9]*$/ ;
        var companyCode = $("#credit_input").val();
        if (companyCode!=null && companyCode!='' && !reg.test(companyCode)) {
            if ($('#creditMessage').attr('class').indexOf('hide')>-1){
                $('#creditMessage').removeClass('hide');
                isTrue = true;
            }
        }else if (companyCode!=null && companyCode!='' && reg.test(companyCode)) {
            if($('#creditMessage').attr('class').indexOf('hide')==-1){
                $('#creditMessage').addClass('hide');
                isTrue = false;
            }
        }
    }

    $('#credit_input').focus(function(){
        isTrue = false;
        if($('#creditMessage').attr('class').indexOf('hide')==-1){
            $('#creditMessage').addClass('hide')
        }
    }),$('#credit_input').focusout(function(){
        checkCompanyCode()
    });

    function check(id){
        var text=document.getElementById(id).value;
        if(text.trim()==''||text.trim()==null){
            document.getElementById(id).value = '';
            $('#'+id).addClass('check');
            isTrue = true;
        }
    }

    var cpro_id = "u2671677";
    $(document).ready(function () {
        if (referrer) {
            $('.goback').attr('href', referrer);
        }
    });
</script>
</body>
</html>